# 📗 Use Case Document — 익명 셀러 커뮤니티

---

## 📌 목차

1. Actor Definitions  
2. Use Case Scenarios  
3. Main Steps  
4. Exception Handling  
5. Comprehensive Actor Definitions  
6. Detailed Use Case Scenarios  
7. Main Steps and Flow of Events  
8. Alternative Flows and Edge Cases  
9. Preconditions and Postconditions  
10. Business Rules and Constraints  
11. Exception Handling Procedures  
12. User Interface Considerations  
13. Data Requirements and Data Flow  
14. Security and Privacy Considerations

---

## 1. 🎭 Actor Definitions

| 구분 | 설명 |
|------|------|
| **비회원 사용자 (Guest User)** | 로그인하지 않은 일반 방문자. 글 열람, 검색 가능. 작성, 댓글, 공감 불가. |
| **회원 사용자 (Registered User)** | 로그인한 셀러. 글 작성, 댓글, 공감, 신고 가능. |
| **관리자 (Admin)** | 부적절한 게시글/댓글을 관리, 신고 처리, 베스트 선정 알고리즘 관리. |

---

## 2. 🧩 Use Case Scenarios

| ID | 시나리오명 | 주요 액터 | 목적 |
|----|-------------|-----------|------|
| UC-01 | 글 작성 | 회원 사용자 | 셀러의 이야기를 익명으로 작성하여 공유 |
| UC-02 | 글 열람 | 모든 사용자 | 다른 셀러의 글을 탐색하고 읽기 |
| UC-03 | 댓글 작성 | 회원 사용자 | 다른 글에 공감 또는 조언 남기기 |
| UC-04 | 공감 기능 | 회원 사용자 | 글 또는 댓글에 '공감' 표시 |
| UC-05 | 신고 기능 | 회원 사용자 | 부적절한 글/댓글 신고 |
| UC-06 | 검색 | 모든 사용자 | 키워드로 게시글 검색 |
| UC-07 | 로그인/회원가입 | 모든 사용자 | 계정 생성 또는 로그인 |
| UC-08 | 베스트 글 선정 | 시스템/관리자 | 조회수 및 댓글 수 기준 인기글 자동 선정 |

---

## 3. 🚶 Main Steps (요약 흐름)

| 단계 | 사용자 행동 | 시스템 반응 |
|------|-------------|-------------|
| 1 | 사용자가 글 작성 버튼 클릭 | 로그인 여부 확인 |
| 2 | 로그인 상태면 글 작성 페이지로 이동 | 제목, 본문, 카테고리 입력 가능 |
| 3 | 작성 후 '등록' 클릭 | DB에 저장, 게시글 상세 페이지로 이동 |
| 4 | 비회원이 작성 시도 | 로그인 페이지로 리디렉션 |

---

## 4. ⚠️ Exception Handling (요약)

| 예외 상황 | 시스템 처리 |
|-----------|-------------|
| 로그인되지 않은 상태에서 작성 시도 | 로그인 페이지로 이동 |
| 필수 입력값 누락 | 입력 오류 메시지 출력 |
| 네트워크 장애 발생 | “작성 실패” 알림 및 재시도 버튼 표시 |
| 부적절한 콘텐츠 신고 다수 | 관리자 검토 대기 상태로 변경 |

---

## 5. 👥 Comprehensive Actor Definitions

| 액터 | 역할 | 권한 | 주요 인터랙션 |
|------|------|------|----------------|
| 비회원 | 콘텐츠 탐색 | 읽기 전용 | 글 목록 보기, 검색 |
| 회원 | 콘텐츠 참여 | 작성, 댓글, 공감, 신고 | 글 작성, 댓글 작성, 공감 클릭 |
| 관리자 | 콘텐츠 관리 | 신고 처리, 사용자 제재 | 신고 검토, 게시글 삭제 |

---

## 6. 🎬 Detailed Use Case Scenarios

### UC-01 글 작성
**주요 액터:** 회원 사용자  
**목적:** 익명으로 글을 등록하여 커뮤니티에 공유  
**사전 조건:** 로그인 상태  
**사후 조건:** 글이 DB에 저장되고, 글 상세 페이지로 리디렉션  

#### 주요 단계
1. 사용자 → “글쓰기” 버튼 클릭  
2. 시스템 → 로그인 여부 확인  
3. 사용자 → 제목, 본문, 카테고리 입력  
4. 사용자 → “등록” 클릭  
5. 시스템 → 입력 검증 후 DB 저장  
6. 시스템 → `/post/[id]` 페이지로 이동  

#### 예외 흐름
- 입력값 누락 → 오류 메시지 “제목과 본문은 필수입니다.”
- 비로그인 상태 → `/login`으로 이동  
- DB 저장 실패 → “글 등록에 실패했습니다. 다시 시도해주세요.”

---

### UC-02 글 열람
**주요 액터:** 모든 사용자  
**목적:** 다른 셀러의 글을 열람하고 공감/댓글 확인  

#### 주요 단계
1. 사용자 → `/posts` 또는 `/post/[id]` 접근  
2. 시스템 → 게시글 목록/상세 내용 로드  
3. 사용자 → 댓글, 공감수 확인  

#### 예외 흐름
- 게시글 삭제됨 → “삭제된 게시글입니다.” 알림 표시  

---

### UC-03 댓글 작성
**주요 액터:** 회원 사용자  
**목적:** 글에 의견 또는 공감을 남기기  

#### 주요 단계
1. 사용자 → 댓글 입력 후 “등록” 클릭  
2. 시스템 → 로그인 여부 및 입력 검증  
3. 시스템 → DB 저장 후 실시간 반영  

#### 예외 흐름
- 비로그인 → 로그인 유도 팝업  
- 금지어 포함 → “부적절한 단어가 포함되어 있습니다.”

---

### UC-05 신고 기능
**주요 액터:** 회원 사용자  
**목적:** 부적절한 글/댓글을 신고하여 커뮤니티 질 유지  

#### 주요 단계
1. 사용자 → “신고” 버튼 클릭  
2. 시스템 → 신고 사유 선택 UI 표시  
3. 사용자 → 사유 선택 및 제출  
4. 시스템 → 신고 데이터 저장 및 관리자 알림  

#### 예외 흐름
- 중복 신고 → “이미 신고된 콘텐츠입니다.” 메시지  

---

## 7. 🧭 Main Steps and Flow of Events

| 단계 | 액터 | 시스템 반응 |
|------|------|-------------|
| 1 | 사용자가 웹사이트 접근 | 홈 화면 표시 |
| 2 | 사용자 → 메뉴 선택 | 해당 카테고리 글 목록 표시 |
| 3 | 사용자 → 특정 글 클릭 | 상세 페이지 로드 |
| 4 | 사용자 → 댓글 작성 | 실시간 반영 |
| 5 | 사용자 → 공감 클릭 | 공감 수 증가 표시 |

---

## 8. 🔄 Alternative Flows and Edge Cases

| 시나리오 | 대체 흐름 |
|----------|------------|
| 네트워크 오류 | 로컬 캐시된 데이터 표시, 재시도 버튼 제공 |
| DB 오류 | 임시 저장 후 재전송 기능 제공 |
| 부적절한 콘텐츠 | 필터링 또는 관리자 승인 대기 상태 전환 |
| 동일한 IP에서 과도한 신고 | 자동 차단 또는 쿨다운 타이머 적용 |

---

## 9. ⏳ Preconditions and Postconditions

| 구분 | 내용 |
|------|------|
| 사전 조건 | 회원은 로그인 상태여야 함 |
| 사후 조건 | 글/댓글은 DB에 반영되고 즉시 표시됨 |

---

## 10. ⚙️ Business Rules and Constraints

- 한 사용자는 하루에 5회 이상 신고 불가  
- 동일 게시글에 공감 중복 불가  
- 관리자만 베스트글 알고리즘 기준 변경 가능  
- 글 제목 최소 5자, 본문 최소 30자 이상  
- 신고 누적 3회 이상 콘텐츠는 자동 숨김 처리

---

## 11. 🚨 Exception Handling Procedures

| 상황 | 대응 절차 |
|------|------------|
| DB 장애 | 재시도 요청 및 임시 저장 |
| 인증 만료 | 자동 로그아웃 후 재로그인 요청 |
| 입력값 오류 | 빨간색 안내문 및 포커스 이동 |
| 부적절한 단어 포함 | 사용자 경고 및 재입력 유도 |

---

## 12. 💻 User Interface Considerations

- 입력 폼에 실시간 검증 메시지 표시  
- 반응형 레이아웃: 모바일은 카드형 UI  
- 공감, 댓글 버튼은 터치 영역 확장  
- 접근성: 스크린 리더, 명확한 색상 대비  
- 알림 토스트(Notification)로 사용자 피드백 제공  

---

## 13. 🧠 Data Requirements and Data Flow

### 주요 데이터 엔터티
- **User**: id, email, nickname, join_date  
- **Post**: id, title, content, category, view_count, created_at, author_id  
- **Comment**: id, post_id, content, author_id, created_at  
- **Reaction**: id, target_type(post/comment), target_id, user_id  
- **Report**: id, target_type, reason, created_at, reporter_id  

### 데이터 흐름 요약
1. 사용자가 작성 → Supabase DB 저장  
2. 실시간 구독(Subscription)으로 최신 상태 반영  
3. 신고 발생 → 관리자용 대시보드로 전달  

---

## 14. 🔒 Security and Privacy Considerations

| 항목 | 세부 내용 |
|------|-----------|
| 인증 | Supabase Auth (JWT 기반) |
| 익명성 | 작성자 id는 비공개 처리 (익명번호만 노출) |
| 데이터 보호 | HTTPS 통신, XSS 방지, 입력값 sanitize |
| 권한 관리 | 관리자만 신고/삭제/베스트 설정 가능 |
| 개인정보 보호 | 이메일 외 모든 정보는 익명화 저장 |

---

✅ **기술 스택 참고**
- Frontend: Next.js, Tailwind CSS  
- Backend: Supabase (Auth + DB)  
- Hosting: Vercel  
- DB: PostgreSQL  
- Auth: JWT 기반 세션 유지  
- 반응형: Tailwind + Flex/Grid 조합  
